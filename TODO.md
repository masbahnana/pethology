# üéì Pethology - TODO List & Roadmap Completo

**√öltima atualiza√ß√£o:** 17 Outubro 2025
**Status atual:** Achievement System ‚úÖ + Import Students ‚úÖ + User Indicator ‚úÖ

---

## üöÄ **QUICK START - PR√ìXIMA SESS√ÉO:**

**Objetivo Principal:** Implementar Achievement System com emojis üèÜ

**Copy/Paste este prompt para come√ßar:**

```
Ol√°! Vamos continuar o Pethology implementando o Achievement System.

Status atual:
- ‚úÖ 200 quest√µes de quiz prontas (10 m√≥dulos)
- ‚úÖ Quiz randomization funcionando
- ‚úÖ Firebase + Auth0 configurados

Pr√≥ximo objetivo: Achievement System com emojis

Preciso:
1. Criar assets/js/achievements.js com 15+ conquistas
2. Adicionar se√ß√£o de Achievements no student-dashboard.html
3. Implementar check de achievements ap√≥s quiz
4. Toast notifications animados quando desbloquear achievement
5. Salvar achievements no Firebase

Refer√™ncia: Ver TODO.md se√ß√£o "üèÜ 1. ACHIEVEMENT SYSTEM" com todos os detalhes.

Pode me ajudar a implementar?
```

---

## ‚úÖ **O QUE J√Å EST√Å PRONTO:**

### **Autentica√ß√£o & Backend:**
- [x] Auth0 configurado (Microsoft, Google, Email/Password)
- [x] Firebase Firestore setup completo
- [x] Usu√°rios salvos automaticamente no Firebase
- [x] L√≥gica de role (Student/Teacher) baseada em email
- [x] `firebase-service.js` - servi√ßo centralizado para dados
- [x] Login funcionando em produ√ß√£o (Netlify)
- [x] Callbacks configurados corretamente

### **Frontend Base:**
- [x] Homepage responsiva
- [x] About page com team
- [x] Student Dashboard (estrutura)
- [x] Teacher Dashboard (estrutura)
- [x] Quiz system b√°sico funcionando
- [x] Blog page com posts
- [x] Design minimalista implementado

### **Quiz System:**
- [x] 10 m√≥dulos completos com 20 quest√µes cada (200 quest√µes total)
- [x] Randomiza√ß√£o de quest√µes usando Fisher-Yates algorithm
- [x] Randomiza√ß√£o de op√ß√µes de resposta (shuffle answers)
- [x] Perguntas + Respostas + Explica√ß√µes
- [x] Interface funcionando com navega√ß√£o
- [x] M√≥dulos: Biology, Animal Welfare, Grooming, Anatomy, Parasitology, Nutrition, Animal Behaviour, Small Animals, Vet Assistant Skills, Communications, Work Experience

### **UI/UX Improvements:**
- [x] Logo Pethology adicionado em todas as p√°ginas (40px height)
- [x] Header consistency: padding 30px 60px em todas p√°ginas
- [x] Notion-style design implementado
- [x] M√≥dulos collapsible no student dashboard (como Tools section)
- [x] Teacher content manager com Home e Logout buttons
- [x] Responsive design mantido

---

## üî• **PRIORIDADE ALTA - Fazer Agora:**

### **üèÜ 1. ACHIEVEMENT SYSTEM**

**Status:** ‚úÖ IMPLEMENTADO! (17 Out 2025)

**Objetivo:** Sistema de conquistas gamificado para engajar estudantes

#### **Achievements Planejados (15+ conquistas):**

**üìö Conquistas de Aprendizado:**
- üéì **First Steps** - Complete seu primeiro quiz
- üìñ **Knowledge Seeker** - Complete 5 quizzes
- üß† **Brain Master** - Complete todos os 10 m√≥dulos
- üî• **Perfect Score** - Tire 100% em um quiz
- ‚≠ê **Excellence** - Tire 90%+ em 5 quizzes
- üíØ **Perfectionist** - Tire 100% em 3 quizzes diferentes

**‚ö° Conquistas de Consist√™ncia:**
- üåÖ **Early Bird** - Complete 3 quizzes antes do meio-dia
- üîÑ **Streak Master** - 7 dias consecutivos completando quizzes
- üöÄ **Speed Demon** - Complete um quiz em menos de 5 minutos com 80%+
- üéØ **Focused** - Complete 3 quizzes no mesmo dia

**üéØ Conquistas Especializadas:**
- üêæ **Animal Lover** - Complete todos os m√≥dulos de animais (Small Animals, Animal Behaviour, Animal Welfare)
- ‚öïÔ∏è **Vet Pro** - Complete todos os m√≥dulos cl√≠nicos (Vet Skills, Anatomy, Parasitology)
- ü•ó **Nutrition Expert** - Tire 90%+ no m√≥dulo de Nutrition
- ‚úÇÔ∏è **Grooming Guru** - Tire 90%+ no m√≥dulo de Grooming
- üí¨ **Communication Pro** - Tire 90%+ em Communications

#### **Implementa√ß√£o T√©cnica:**

**Arquivo:** `assets/js/achievements.js` (criar novo)

```javascript
export const ACHIEVEMENTS = {
  first_steps: {
    id: 'first_steps',
    name: 'First Steps',
    emoji: 'üéì',
    description: 'Complete your first quiz',
    condition: (stats) => stats.totalQuizzes >= 1,
    rarity: 'common'
  },
  knowledge_seeker: {
    id: 'knowledge_seeker',
    name: 'Knowledge Seeker',
    emoji: 'üìñ',
    description: 'Complete 5 quizzes',
    condition: (stats) => stats.totalQuizzes >= 5,
    rarity: 'common'
  },
  brain_master: {
    id: 'brain_master',
    name: 'Brain Master',
    emoji: 'üß†',
    description: 'Complete all 10 modules',
    condition: (stats) => stats.completedModules >= 10,
    rarity: 'legendary'
  },
  perfect_score: {
    id: 'perfect_score',
    name: 'Perfect Score',
    emoji: 'üî•',
    description: 'Score 100% on a quiz',
    condition: (stats) => stats.perfectScores >= 1,
    rarity: 'rare'
  },
  // ... mais achievements
};

export function checkAchievements(userId, stats) {
  const unlockedAchievements = [];

  for (const [key, achievement] of Object.entries(ACHIEVEMENTS)) {
    if (!stats.achievements.includes(key) && achievement.condition(stats)) {
      unlockedAchievements.push(achievement);
    }
  }

  return unlockedAchievements;
}

export function showAchievementToast(achievement) {
  // Toast notification com emoji e anima√ß√£o
  const toast = document.createElement('div');
  toast.className = 'achievement-toast';
  toast.innerHTML = `
    <div class="achievement-emoji">${achievement.emoji}</div>
    <div>
      <div class="achievement-title">Achievement Unlocked!</div>
      <div class="achievement-name">${achievement.name}</div>
    </div>
  `;
  document.body.appendChild(toast);

  setTimeout(() => toast.classList.add('show'), 100);
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}
```

**Student Dashboard Updates:**

```javascript
// Em student-dashboard.html
async function loadAchievements() {
  const user = JSON.parse(sessionStorage.getItem('pethologyUser'));
  const progress = await PethologyFirebaseService.getStudentProgress(user.id);

  const achievementContainer = document.getElementById('achievementsGrid');

  Object.values(ACHIEVEMENTS).forEach(achievement => {
    const isUnlocked = progress.achievements?.includes(achievement.id);
    const achievementCard = `
      <div class="achievement-card ${isUnlocked ? 'unlocked' : 'locked'}">
        <div class="achievement-emoji">${achievement.emoji}</div>
        <div class="achievement-name">${achievement.name}</div>
        <div class="achievement-description">${achievement.description}</div>
        ${isUnlocked ? '<div class="unlocked-badge">‚úì</div>' : ''}
      </div>
    `;
    achievementContainer.innerHTML += achievementCard;
  });
}
```

**CSS para Achievements:**

```css
.achievement-card {
  padding: 20px;
  border-radius: 12px;
  border: 2px solid #e5e5e5;
  text-align: center;
  transition: all 0.3s ease;
}

.achievement-card.locked {
  opacity: 0.5;
  filter: grayscale(100%);
}

.achievement-card.unlocked {
  border-color: var(--accent);
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.achievement-emoji {
  font-size: 3rem;
  margin-bottom: 12px;
}

.achievement-toast {
  position: fixed;
  top: 20px;
  right: 20px;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  display: flex;
  gap: 16px;
  align-items: center;
  transform: translateX(400px);
  transition: transform 0.3s ease;
  z-index: 9999;
}

.achievement-toast.show {
  transform: translateX(0);
}
```

**Firebase Integration:**

```javascript
// Em firebase-service.js adicionar:
async saveQuizResult(resultData) {
  // ... c√≥digo existente ...

  // Check achievements ap√≥s salvar resultado
  const progress = await this.getStudentProgress(resultData.userId);
  const newAchievements = checkAchievements(resultData.userId, progress);

  if (newAchievements.length > 0) {
    // Salvar achievements no Firebase
    await this.updateStudentAchievements(resultData.userId, newAchievements);

    // Mostrar toast para cada achievement
    newAchievements.forEach(achievement => {
      showAchievementToast(achievement);
    });
  }
}
```

#### **Tarefas Detalhadas:**
- [x] Criar `assets/js/achievements.js` com sistema de conquistas
- [x] Definir todos os 19 achievements com emojis
- [x] Adicionar se√ß√£o de Achievements no student dashboard
- [x] Implementar check de achievements ap√≥s cada quiz
- [x] Criar toast notification animado
- [x] CSS para achievement cards (locked/unlocked states)
- [x] Salvar achievements no Firebase (student_progress)
- [x] User indicator no header com avatar e dropdown
- [x] Progress circles din√¢micos (4 mais recentes)

---

### **üîí 2. WHITELIST SIGNUP SYSTEM (PR√ìXIMA PRIORIDADE - 2-3 horas)**

**Status:** üî® PARCIALMENTE IMPLEMENTADO (Import Students pronto)

**Objetivo:** Sistema fechado - apenas emails pr√©-registrados podem criar conta

#### **O que j√° est√° pronto:**
- [x] P√°gina `import-students.html` (CSV + manual entry)
- [x] Firebase methods: `addPreRegisteredStudent()`, `checkPreRegistered()`, `markAsRegistered()`
- [x] Bot√£o "Import Students" no teacher dashboard

#### **O que falta:**
- [ ] Modificar `auth0-callback.html` - adicionar whitelist check
- [ ] Bloquear signup se email n√£o est√° na whitelist
- [ ] Mostrar mensagem: "You need an invitation from your teacher"
- [ ] Auto-assign aluno √† turma ap√≥s signup aprovado
- [ ] Testar fluxo: Add student ‚Üí Signup blocked/allowed

**Arquivos a modificar:**
- `auth0-callback.html` - CR√çTICO (adicionar whitelist check)

**Tempo estimado:** 2-3 horas

---

### **üì¢ 3. ANNOUNCEMENTS SYSTEM (3-4 horas)**

**Status:** üìã PLANEJADO

**Objetivo:** Professor envia avisos para a turma, alunos veem no dashboard

#### **Teacher Side:**
- [ ] Bot√£o "üì¢ New Announcement" no teacher dashboard
- [ ] Form para criar announcement:
  - T√≠tulo
  - Mensagem
  - Pin to top? (checkbox)
  - Send email notification? (checkbox)
- [ ] Lista de announcements com edit/delete

#### **Student Side:**
- [ ] Banner no topo do student dashboard
- [ ] Badge com n√∫mero de n√£o lidos
- [ ] Lista de announcements com data
- [ ] Mark as read quando abrir

#### **Firebase Structure:**
```javascript
/announcements/{announcementId}
{
  id: "announcement_123",
  classId: "class_ac2526",
  createdBy: "teacher_id",
  title: "Quiz 5 Available This Friday!",
  message: "Don't forget to complete...",
  isPinned: true,
  createdAt: timestamp,
  readBy: ["student1_id", "student2_id"]
}
```

**Arquivos a criar:**
- `assets/js/announcements.js` - L√≥gica de announcements

**Arquivos a modificar:**
- `teacher-dashboard.html` - Adicionar se√ß√£o de announcements
- `student-dashboard.html` - Mostrar announcements
- `firebase-service.js` - M√©todos CRUD de announcements

**Tempo estimado:** 3-4 horas

---

### **üìÖ 4. CALENDAR + ASSIGNMENT REMINDERS (3-4 horas)**

**Status:** üìã PLANEJADO

**Objetivo:** Calend√°rio visual com todas as deadlines e upcoming quizzes

#### **Features:**
- [ ] Calendar widget no student dashboard
- [ ] Lista de "Upcoming Deadlines" (pr√≥ximos 7 dias)
- [ ] Color coding:
  - üéØ Quizzes (blue)
  - üìù Assignments (orange)
  - üìä Exams (red)
  - üì¢ Announcements (green)
- [ ] Overdue warnings (vermelho)
- [ ] Click no item ‚Üí vai para p√°gina do quiz/assignment

#### **Calendar View:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë OCTOBER 2025                   ‚ïë
‚ïë                                ‚ïë
‚ïë 18  Today                      ‚ïë
‚ïë 20  Quiz: Small Animals üéØ     ‚ïë
‚ïë 22  Assignment: Essay Due üìù   ‚ïë
‚ïë 25  Exam Mode: Midterm üìä      ‚ïë
‚ïë 28  Quiz: Parasitology üéØ     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

Upcoming (next 7 days):
‚ö†Ô∏è Oct 22: Essay due (OVERDUE)
üéØ Oct 25: Midterm exam (in 3 days)
üéØ Oct 28: Quiz available
```

#### **Firebase Structure:**
```javascript
/events/{eventId}
{
  id: "event_123",
  classId: "class_ac2526",
  type: "quiz" | "assignment" | "exam" | "announcement",
  title: "Quiz: Small Animals",
  date: timestamp,
  dueDate: timestamp,
  relatedId: "quiz_small_animals"
}
```

**Libraries:**
- Consider using: FullCalendar.js or build custom

**Arquivos a criar:**
- `assets/js/calendar.js` - L√≥gica do calend√°rio

**Arquivos a modificar:**
- `student-dashboard.html` - Adicionar calendar widget
- `firebase-service.js` - M√©todos para buscar events

**Tempo estimado:** 3-4 horas

---

### **3. Student Dashboard - Dados Reais (2-3 horas)**

**Arquivo:** `student-dashboard.html`

**Tarefas:**
- [ ] Carregar progresso do Firebase (n√£o localStorage)
- [ ] Mostrar stats reais (total quizzes, average score, streak)
- [ ] Progress circles com dados do Firebase
- [ ] Achievements baseados em progresso real
- [ ] Quiz history do Firebase

**C√≥digo necess√°rio:**
```javascript
import { PethologyFirebaseService } from './assets/js/firebase-service.js';

async function loadStudentData() {
  const user = JSON.parse(sessionStorage.getItem('pethologyUser'));
  const progress = await PethologyFirebaseService.getStudentProgress(user.id);
  
  // Atualizar UI com dados reais
  updateProgressCircles(progress.moduleProgress);
  updateStats(progress.overallStats);
  updateAchievements(progress.achievements);
}
```

---

### **2. Quiz System - Salvar Resultados (2 horas)**

**Arquivo:** `assets/js/quiz/quiz.js`

**Tarefas:**
- [ ] Salvar resultado no Firebase ap√≥s completar quiz
- [ ] Atualizar student_progress automaticamente
- [ ] Calcular e salvar tempo gasto
- [ ] Atualizar completion percentage do m√≥dulo

**C√≥digo necess√°rio:**
```javascript
async function onQuizCompleted(quizData) {
  const user = JSON.parse(sessionStorage.getItem('pethologyUser'));
  
  const resultData = {
    userId: user.id,
    quizId: currentQuizModule,
    score: quizData.correctAnswers / quizData.totalQuestions,
    totalQuestions: quizData.totalQuestions,
    correctAnswers: quizData.correctAnswers,
    timeSpent: quizData.timeSpent,
    completedAt: new Date(),
    answers: quizData.answers
  };
  
  await PethologyFirebaseService.saveQuizResult(resultData);
  await updateStudentProgress(user.id, quizData);
}
```

---

### **3. Teacher Dashboard - Analytics Reais (3 horas)**

**Arquivo:** `teacher-dashboard.html`

**Tarefas:**
- [ ] Carregar dados reais de estudantes
- [ ] Mostrar lista de estudantes com progresso
- [ ] Stats da turma (m√©dia, total de quizzes, etc.)
- [ ] Gr√°ficos com dados reais
- [ ] Filtros por m√≥dulo

**C√≥digo necess√°rio:**
```javascript
async function loadTeacherAnalytics() {
  const analytics = await PethologyFirebaseService.getClassAnalytics();
  
  updateDashboardStats({
    totalStudents: analytics.uniqueStudents,
    averageScore: analytics.averageScore,
    totalQuizzes: analytics.totalAttempts
  });
  
  loadStudentTable(analytics.studentPerformance);
}
```

---

## ‚ö° **PRIORIDADE M√âDIA - Pr√≥ximas Semanas:**

### **4. Adaptive Quiz AI - Implementa√ß√£o (5-6 horas)**

**Status:** Algoritmo pronto, falta integrar

**Tarefas:**
- [ ] Integrar `adaptive-quiz-ai.js` com Firebase
- [ ] Carregar perfil adaptativo do estudante
- [ ] Selecionar quest√µes baseadas em performance
- [ ] Salvar metadata de adapta√ß√£o
- [ ] UI diferenciada para Adaptive Quiz

**Arquivo novo:** `assets/js/adaptive-quiz-integration.js`

---

### **5. Smart Review System (4 horas)**

**Tarefas:**
- [ ] Identificar t√≥picos fracos do estudante
- [ ] Gerar quiz personalizado de revis√£o
- [ ] Sistema de spaced repetition
- [ ] Notifica√ß√µes de quando revisar

---

### **6. Exam Mode (3 horas)**

**Tarefas:**
- [ ] Timer funcional
- [ ] Modo sem hints/explica√ß√µes
- [ ] Randomiza√ß√£o de quest√µes
- [ ] Ambiente distraction-free
- [ ] Analytics p√≥s-exame

---

### **7. Microsoft Forms Import (6-8 horas)**

**SUPER IMPORTANTE para professores!**

**Tarefas:**
- [ ] Integra√ß√£o com Microsoft Graph API
- [ ] Listar Forms do professor
- [ ] Converter formato Forms ‚Üí Pethology
- [ ] Preview antes de importar
- [ ] Salvar quiz no Firebase

**Fluxo:**
```
Professor ‚Üí Microsoft Forms (j√° usa) 
  ‚Üì
Import para Pethology (1 clique)
  ‚Üì
Sistema gera: Adaptive Quiz + Smart Review + Exam Mode automaticamente
```

---

## ‚ú® **NICE TO HAVE - Futuro:**

### **8. Gamifica√ß√£o Avan√ßada**
- [ ] Sistema de XP e Levels
- [ ] Achievements visuais bonitos
- [ ] Leaderboards por turma
- [ ] Badges personalizados
- [ ] Streak rewards

### **9. Internship Journal**
- [ ] CRUD de journal entries
- [ ] Upload de fotos
- [ ] Timeline view
- [ ] Compartilhar com professores

### **10. Gloss√°rio Interativo**
- [ ] Search functionality
- [ ] Defini√ß√µes + imagens
- [ ] Audio pronunciation
- [ ] Favoritos

### **11. Flashcards System**
- [ ] Auto-gera√ß√£o de flashcards
- [ ] Spaced repetition
- [ ] Modo estudo
- [ ] Import/Export

### **12. PWA & Offline Mode**
- [ ] Service Worker
- [ ] Cache de conte√∫do
- [ ] Sync quando online
- [ ] Install prompt

### **13. Mobile App**
- [ ] React Native ou Flutter
- [ ] Notifica√ß√µes push
- [ ] Sync com web

---

## üîê **SEGURAN√áA - Antes de Lan√ßar P√∫blico:**

### **Firestore Rules Seguras:**
- [ ] Implementar Firebase Authentication com Auth0
- [ ] Rules baseadas em user ID real
- [ ] Verifica√ß√£o de role (Student/Teacher)
- [ ] Rate limiting
- [ ] Data validation

### **C√≥digo:**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read: if request.auth.uid == userId;
      allow write: if request.auth.uid == userId;
    }
    
    match /student_progress/{userId} {
      allow read, write: if request.auth.uid == userId;
    }
    
    match /quiz_results/{resultId} {
      allow read: if request.auth != null;
      allow create: if request.auth != null;
      allow update, delete: if request.auth.uid == resource.data.userId;
    }
  }
}
```

---

## üêõ **BUGS CONHECIDOS:**

- [ ] WebSocket error no Live Server (n√£o afeta produ√ß√£o)
- [ ] CORS error em localhost (funciona em produ√ß√£o)
- [ ] Firestore rules abertas (tempor√°rio)
- [ ] Auth.js ainda existe (deletar se n√£o usar MSAL)

---

## üìä **M√âTRICAS DE SUCESSO:**

**Para saber que est√° pronto:**

### **MVP (Minimum Viable Product):**
- ‚úÖ Login funcionando
- ‚úÖ Dados salvos no Firebase
- [ ] Student v√™ progresso real
- [ ] Quiz salva resultados
- [ ] Teacher v√™ analytics b√°sicos

### **V1.0 (Launch):**
- [ ] Adaptive Quiz funcionando
- [ ] Microsoft Forms import
- [ ] Mobile responsive perfeito
- [ ] Seguran√ßa implementada
- [ ] 100+ quest√µes por m√≥dulo

### **V2.0 (Futuro):**
- [ ] Smart Review + Exam Mode
- [ ] Gamifica√ß√£o completa
- [ ] PWA/Offline
- [ ] Mobile app

---

## üéØ **SESS√ÉO DE DESENVOLVIMENTO SUGERIDA:**

### **Pr√≥xima Sess√£o (2-3 horas):**
1. **Student Dashboard com dados reais** (1.5h)
2. **Quiz salvando resultados** (1h)
3. **Testar fluxo completo** (0.5h)

### **Sess√£o Seguinte (2-3 horas):**
1. **Teacher Dashboard analytics** (2h)
2. **Interface melhorias** (1h)

### **Sess√£o Futura (4-6 horas):**
1. **Adaptive Quiz integration** (3h)
2. **Microsoft Forms import** (3h)

---

## üìù **NOTAS T√âCNICAS:**

### **Arquivos Principais:**
```
pethology/
‚îú‚îÄ‚îÄ auth0-login.html          # Login page (FUNCIONAL ‚úÖ)
‚îú‚îÄ‚îÄ student-dashboard.html    # Needs: Real data integration
‚îú‚îÄ‚îÄ teacher-dashboard.html    # Needs: Real analytics
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ firebase-service.js     # FUNCIONAL ‚úÖ
‚îÇ       ‚îú‚îÄ‚îÄ quiz/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ quiz.js            # Needs: Save to Firebase
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ biology.js         # FUNCIONAL ‚úÖ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ animal-welfare.js  # FUNCIONAL ‚úÖ
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ adaptive-quiz-ai.js # Needs: Integration
‚îÇ       ‚îî‚îÄ‚îÄ auth.js                # DELETE se n√£o usar MSAL
```

### **Firebase Collections Estrutura:**
```
/users/{userId}
  - id, name, email, role, photo, lastLogin

/student_progress/{userId}
  - overallStats: { totalQuizzes, averageScore, streak }
  - moduleProgress: { biology: { completion, averageScore } }
  - achievements: []
  - adaptiveProfile: { confidence, strongTopics, weakTopics }

/quiz_results/{resultId}
  - userId, quizId, score, timeSpent, answers[], completedAt

/quizzes/{quizId}  (Future)
  - title, module, questions[], createdBy

/content/{contentId}  (Future)
  - title, body, module, type
```

### **Auth0 Connections Ativas:**
- ‚úÖ Username-Password-Authentication (Database)
- ‚úÖ google-oauth2 (Social)
- ‚ö†Ô∏è windowslive (Microsoft - needs Azure AD config)

### **Netlify Deploy:**
- URL: https://pethology.netlify.app
- Auto-deploy: GitHub main branch
- Environment: Production

---

## üöÄ **QUICK START para Pr√≥xima Sess√£o:**

### **Copy/Paste este prompt:**

```
Ol√°! Estou continuando o desenvolvimento do Pethology. 

Status atual:
- ‚úÖ Backend Firebase funcionando
- ‚úÖ Auth0 login funcionando  
- ‚úÖ Usu√°rios sendo salvos no Firebase

Pr√≥ximo objetivo: Integrar Student Dashboard com dados reais do Firebase.

Preciso:
1. Carregar student_progress do Firebase
2. Atualizar UI com dados reais (progress circles, stats)
3. Mostrar quiz history

Arquivos relevantes:
- student-dashboard.html
- assets/js/firebase-service.js (j√° tem as fun√ß√µes)

Pode me ajudar a implementar isso?
```

---

## üìö **RECURSOS √öTEIS:**

### **Documenta√ß√£o:**
- [Firebase Firestore Docs](https://firebase.google.com/docs/firestore)
- [Auth0 Docs](https://auth0.com/docs)
- [Microsoft Graph API](https://docs.microsoft.com/graph)

### **Design Inspiration:**
- SimplyStudy.ie (competitor)
- Duolingo (gamification)
- Notion (clean UI)

### **Tech Stack:**
- Frontend: Vanilla HTML/CSS/JS (ES6 Modules)
- Backend: Firebase Firestore
- Auth: Auth0
- Hosting: Netlify
- Algorithms: Fisher-Yates Shuffle para randomiza√ß√£o
- Future: React/Vue for complex features?

### **Quiz Modules Structure (200 quest√µes):**
```
assets/js/quiz/
‚îú‚îÄ‚îÄ quiz.js                    # Main quiz logic + randomization
‚îú‚îÄ‚îÄ biology.js                 # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ animal-welfare.js          # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ grooming.js                # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ anatomy.js                 # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ parasitology.js            # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ nutrition.js               # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ animal-behaviour.js        # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ small-animals.js           # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ vet-assistant-skills.js    # 20 questions ‚úÖ
‚îú‚îÄ‚îÄ communications.js          # 20 questions ‚úÖ
‚îî‚îÄ‚îÄ work-experience.js         # 20 questions ‚úÖ

Total: 10 modules √ó 20 questions = 200 questions
```

---

## ‚úÖ **ANTES DE FINALIZAR SESS√ÉO:**

**Checklist:**
- [ ] Commit & Push to GitHub
- [ ] Deploy to Netlify
- [ ] Testar em produ√ß√£o
- [ ] Atualizar este TODO list
- [ ] Anotar bugs/ideias

---

## üí™ **MOTIVA√á√ÉO:**

**Voc√™ j√° tem:**
- Sistema de autentica√ß√£o profissional ‚úÖ
- Backend escal√°vel ‚úÖ  
- Base s√≥lida para crescer ‚úÖ

**Pr√≥ximo milestone:** Dashboard funcional com dados reais!

**Lembre-se:** Roma n√£o foi constru√≠da em um dia. Cada sess√£o √© um progresso! üöÄ

---

**Fim do TODO List**

*Mantenha este documento atualizado a cada sess√£o!*

## üìã **NOTAS DA √öLTIMA SESS√ÉO (15 OUT 2025):**

**‚úÖ Completado:**
- [x] Logo system implementado (todas as p√°ginas)
- [x] Header consistency estabelecida (padding 30px 60px)
- [x] 5 novos m√≥dulos de quiz criados (100 novas quest√µes)
- [x] Quiz randomization implementado (Fisher-Yates)
- [x] M√≥dulos menu collapsible no student dashboard
- [x] Teacher content manager com Home/Logout buttons

**üìä M√©tricas da Sess√£o:**
- Arquivos modificados: 15+
- Novas quest√µes criadas: 100
- Total quest√µes no sistema: 200
- M√≥dulos completos: 10/10
- Features implementados: Logo system, Randomiza√ß√£o, Collapsible menus

**üéØ Pr√≥xima Sess√£o - FOCO:**
1. **Achievement System** (usar emojis inicialmente)
2. Depois: Adaptive Quiz, Smart Review, Test Mode, Import via Forms

**üí° Ideias Futuras Anotadas:** DONE
- Quiz sem login: adicionar aviso e reduzir quest√µes
- Student dashboard: logout no content
- Login page: Student/Teacher login buttons (simplificar)
- For Students page: ajustar layout
- For Teachers page: ajustar layout

---

## üéì **CLASS MANAGEMENT SYSTEM + CUSTOM QUIZZES - IMPLEMENTAR FUTURO (8-10 horas)**

**Status:** Especifica√ß√£o completa, pronto para implementar ap√≥s Achievement System

### **üîí CONCEITO - Sistema Fechado com Convites:**
Sistema onde **APENAS alunos convidados podem criar conta**. Professor pr√©-registra alunos antes deles fazerem signup, com suporte para m√∫ltiplos professores por turma.

---

### **üë• FLUXO DO USU√ÅRIO:**

#### **üë®‚Äçüè´ PROFESSOR:**
1. Cria turma (ex: "AC25/26 - Pethology")
2. Adiciona alunos de duas formas:
   - **Manual:** Nome, Sobrenome, Email (@plc.ie)
   - **CSV Import:** Upload de arquivo com m√∫ltiplos alunos
3. Sistema marca emails como **whitelist/pr√©-aprovados**
4. Professor v√™ status: ‚úÖ Registered / ‚è≥ Pending
5. Pode adicionar co-teachers (m√∫ltiplos professores)
6. **NOVO:** Pode criar/importar quizzes customizados para a turma

#### **üßë‚Äçüéì ALUNO (com convite):**
1. Recebe notifica√ß√£o: "You've been added to Pethology AC25/26"
2. Acessa site e faz signup com email pr√©-aprovado
3. ‚úÖ Sistema **permite signup** porque email est√° na whitelist
4. **Automaticamente** entra na turma ao criar conta
5. Dashboard mostra:
   - 10 m√≥dulos p√∫blicos
   - Quizzes customizados da turma

#### **üö´ VISITANTE (sem convite):**
1. Tenta fazer signup no site
2. ‚ùå Sistema **bloqueia**: "You need an invitation to join. Contact your teacher."
3. Pode navegar no site publicamente
4. Pode ver os 10 m√≥dulos p√∫blicos na p√°gina quiz.html
5. Pode fazer quizzes em "modo visitante" (30% das quest√µes)
6. V√™ call-to-action: "Want full access? Ask your teacher for an invitation!"

---

### **üìä TIPOS DE QUIZ NO SISTEMA:**

#### **1. Public Quizzes (j√° existem):**
- 10 m√≥dulos padr√£o (Biology, Animal Welfare, Grooming, etc.)
- ‚úÖ Vis√≠vel para **todos** (logado ou n√£o)
- ‚úÖ Conte√∫do fixo do Pethology
- ‚úÖ Visitantes podem fazer 30% das quest√µes
- ‚úÖ Alunos logados podem fazer 100%

#### **2. Custom Quizzes (novo - APENAS alunos da turma):**
- Criados/importados pelo professor
- üîí **Apenas vis√≠vel para alunos da turma**
- üîí **N√£o aparece para visitantes**
- üîí **N√£o aparece no quiz.html p√∫blico**
- ‚úÖ Aparecem no Student Dashboard em se√ß√£o "Class Quizzes"

---

### **üîê SIGNUP BLOQUEADO - L√≥gica de Whitelist:**

#### **Auth0 Callback Logic:**
```javascript
// Em auth0-callback.html - ap√≥s Auth0 retornar
async function onAuth0Signup(authUser) {
  console.log('üîç Checking if email is whitelisted:', authUser.email);

  // 1. Verificar se email est√° pr√©-registrado
  const preReg = await PethologyFirebaseService.checkPreRegistered(authUser.email);

  if (!preReg) {
    // ‚ùå EMAIL N√ÉO EST√Å NA WHITELIST - BLOQUEAR
    console.log('‚ùå Email not whitelisted. Blocking signup.');

    // Mostrar mensagem de erro
    showErrorMessage(`
      <h2>üö´ Invitation Required</h2>
      <p>You need an invitation from your teacher to create an account.</p>
      <p>Please contact your teacher at your school to request access.</p>
      <p>Email not recognized: ${authUser.email}</p>
    `);

    // Deletar usu√°rio do Auth0 (opcional, ou deixar mas sem acesso ao Firebase)
    await auth0.logout({ returnTo: window.location.origin });
    return;
  }

  // ‚úÖ EMAIL EST√Å NA WHITELIST - PERMITIR SIGNUP
  console.log('‚úÖ Email whitelisted! Creating account and assigning to class:', preReg.classId);

  // 2. Criar usu√°rio no Firebase
  const userData = {
    id: authUser.sub,
    name: `${preReg.firstName} ${preReg.lastName}`,
    email: authUser.email,
    role: 'Student',
    photo: authUser.picture,
    classes: [preReg.classId],
    primaryClass: preReg.classId
  };

  await PethologyFirebaseService.createOrUpdateUser(userData);

  // 3. Auto-assign √† turma
  await PethologyFirebaseService.assignToClass(userData.id, preReg.classId);

  // 4. Atualizar status de pending ‚Üí registered
  await PethologyFirebaseService.markAsRegistered(authUser.email, userData.id);

  // 5. Mover de pending para registered na classe
  await PethologyFirebaseService.updateClassStudents(preReg.classId, userData.id);

  // 6. Inicializar student progress
  await PethologyFirebaseService.initializeStudentProgress(userData.id);

  // 7. Redirecionar para dashboard
  sessionStorage.setItem('pethologyUser', JSON.stringify(userData));
  window.location.href = 'student-dashboard.html';
}
```

#### **Valida√ß√£o no Login (usu√°rios existentes):**
```javascript
// Login de usu√°rio j√° existente - sempre permitido
async function onAuth0Login(authUser) {
  // Usu√°rio j√° existe no Firebase, permitir login normalmente
  const userData = await PethologyFirebaseService.getUser(authUser.sub);

  if (userData) {
    sessionStorage.setItem('pethologyUser', JSON.stringify(userData));

    if (userData.role === 'Teacher') {
      window.location.href = 'teacher-dashboard.html';
    } else {
      window.location.href = 'student-dashboard.html';
    }
  }
}
```

### **Firebase Collections:**

```javascript
// Collection: /classes/{classId}
{
  id: "class_ac2526",
  name: "AC25/26 - Pethology",
  code: "AC2526",
  teachers: ["teacher1_id", "teacher2_id"],  // M√∫ltiplos professores
  createdBy: "teacher_userId",
  createdAt: timestamp,
  active: true,
  students: {
    registered: ["student1_id", "student2_id"],  // J√° criaram conta
    pending: [
      {
        email: "john.doe@plc.ie",
        firstName: "John",
        lastName: "Doe",
        addedAt: timestamp,
        invitedBy: "teacher_id"
      }
    ]
  }
}

// Collection: /pre_registered_students/{email}
{
  email: "john.doe@plc.ie",
  firstName: "John",
  lastName: "Doe",
  classId: "class_ac2526",
  addedBy: "teacher_id",
  addedAt: timestamp,
  registered: false  // Muda para true quando criar conta
}

// Update: /users/{userId}
{
  // ... campos existentes ...
  classes: ["class_12345", "class_67890"],  // Array de turmas
  primaryClass: "class_12345"  // Turma principal (opcional)
}

// Collection: /quizzes/{quizId} - NOVO para Custom Quizzes
{
  id: "quiz_week3_nutrition",
  title: "Week 3 - Animal Nutrition Review",
  category: "Nutrition",
  isPublic: false,  // üîë FALSE = Custom quiz (s√≥ turma)
  visibility: "class_only",
  classId: "class_ac2526",  // Qual turma pode ver
  createdBy: "teacher_userId",
  createdAt: timestamp,
  dueDate: timestamp,  // Opcional - deadline do quiz
  questions: [
    {
      question: "What is the main nutrient in hay?",
      options: ["Fiber", "Protein", "Fat", "Sugar"],
      answer: 0,
      explanation: "Hay is primarily composed of fiber..."
    }
  ],
  metadata: {
    totalQuestions: 15,
    estimatedTime: 10,
    difficulty: "medium",
    importedFrom: "microsoft_forms"  // Se for importado
  }
}
```

---

### **üé® UI DO STUDENT DASHBOARD - Custom Quizzes:**

```html
<!-- student-dashboard.html -->
<div class="dashboard-content">

  <!-- M√≥dulos P√∫blicos (sempre vis√≠vel) -->
  <section class="modules-section">
    <h2>üìö Course Modules</h2>
    <div class="public-modules">
      <!-- 10 m√≥dulos padr√£o aqui -->
      <div class="module-card" onclick="startModule('biology')">
        <span class="module-icon">üß¨</span>
        <span class="module-name">Biology</span>
      </div>
      <!-- ... outros 9 m√≥dulos -->
    </div>
  </section>

  <!-- Quizzes da Turma (s√≥ aparece se estiver em turma) -->
  <section class="class-quizzes-section" id="class-quizzes-section" style="display: none;">
    <h2>üéì AC25/26 Class Quizzes</h2>
    <div class="class-quizzes-grid" id="class-quizzes-grid">
      <!-- Preenchido dinamicamente via JavaScript -->
    </div>
  </section>

</div>
```

```javascript
// JavaScript para carregar quizzes customizados
async function loadAvailableQuizzes() {
  const user = await PethologyFirebaseService.getCurrentUser();

  // 1. Sempre mostra m√≥dulos p√∫blicos
  displayPublicModules();

  if (user && user.classes && user.classes.length > 0) {
    // 2. Carregar quizzes customizados da turma
    const classQuizzes = await PethologyFirebaseService.getClassQuizzes(user.classes[0]);

    if (classQuizzes.length > 0) {
      // Mostrar se√ß√£o de class quizzes
      document.getElementById('class-quizzes-section').style.display = 'block';
      displayClassQuizzes(classQuizzes);
    }
  }
}

function displayClassQuizzes(quizzes) {
  const container = document.getElementById('class-quizzes-grid');
  container.innerHTML = '';

  quizzes.forEach(quiz => {
    const dueDate = quiz.dueDate ? new Date(quiz.dueDate.seconds * 1000) : null;
    const isOverdue = dueDate && dueDate < new Date();

    const card = `
      <div class="quiz-card custom ${isOverdue ? 'overdue' : ''}">
        <div class="quiz-header">
          <span class="quiz-icon">üìù</span>
          <span class="quiz-name">${quiz.title}</span>
          <span class="badge custom">Custom</span>
        </div>
        <div class="quiz-meta">
          <span>üë®‚Äçüè´ Created by teacher</span>
          <span>üìä ${quiz.metadata.totalQuestions} questions</span>
          <span>‚è±Ô∏è ~${quiz.metadata.estimatedTime} min</span>
          ${dueDate ? `
            <span class="due-date ${isOverdue ? 'overdue' : ''}">
              ${isOverdue ? '‚ö†Ô∏è Overdue' : `üìÖ Due: ${formatDate(dueDate)}`}
            </span>
          ` : ''}
        </div>
        <button onclick="startClassQuiz('${quiz.id}')" class="btn-primary">
          Start Quiz
        </button>
      </div>
    `;
    container.innerHTML += card;
  });
}

function formatDate(date) {
  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
}
```

```css
/* CSS para custom quiz cards */
.class-quizzes-section {
  margin-top: 40px;
  padding: 30px;
  background: #f9fafb;
  border-radius: 12px;
}

.class-quizzes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.quiz-card.custom {
  background: white;
  border: 2px solid #3b82f6;
  border-radius: 12px;
  padding: 20px;
  transition: all 0.3s ease;
}

.quiz-card.custom:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2);
}

.quiz-card.overdue {
  border-color: #ef4444;
}

.badge.custom {
  background: #3b82f6;
  color: white;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.due-date.overdue {
  color: #ef4444;
  font-weight: 600;
}
```

---

### **üë®‚Äçüè´ TEACHER DASHBOARD - Create/Import Custom Quizzes:**

```html
<!-- teacher-classes.html - Nova p√°gina -->
<div class="teacher-classes-page">

  <h1>My Classes</h1>

  <!-- Lista de turmas -->
  <div class="classes-grid" id="classes-grid">
    <!-- Preenchido dinamicamente -->
  </div>

  <!-- Detalhes da turma selecionada -->
  <div class="class-details" id="class-details" style="display: none;">

    <div class="class-header">
      <h2>üìö AC25/26 - Pethology</h2>
      <button onclick="editClass()">‚öôÔ∏è Settings</button>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" onclick="showTab('students')">üë• Students</button>
      <button class="tab" onclick="showTab('quizzes')">üìù Quizzes</button>
      <button class="tab" onclick="showTab('analytics')">üìä Analytics</button>
    </div>

    <!-- Tab: Quizzes -->
    <div id="tab-quizzes" class="tab-content">
      <div class="quizzes-toolbar">
        <button onclick="createQuizManual()" class="btn-primary">
          ‚úèÔ∏è Create Quiz
        </button>
        <button onclick="importFromForms()" class="btn-secondary">
          üìÑ Import from Microsoft Forms
        </button>
      </div>

      <div class="quizzes-list" id="class-quizzes-list">
        <!-- Lista de quizzes customizados -->
      </div>
    </div>

  </div>

</div>
```

---

### **CSV Import Format:**
```csv
firstName,lastName,email
John,Doe,john.doe@plc.ie
Jane,Smith,jane.smith@plc.ie
Michael,Johnson,michael.johnson@plc.ie
```

### **‚ú® Features Principais:**
- ‚úÖ **Signup bloqueado**: Apenas emails pr√©-registrados podem criar conta
- ‚úÖ Professor cria turmas
- ‚úÖ Add aluno manual (nome, sobrenome, email)
- ‚úÖ Import CSV com m√∫ltiplos alunos
- ‚úÖ Valida√ß√£o de email (domain @plc.ie)
- ‚úÖ Auto-assignment ao fazer signup
- ‚úÖ Suporte m√∫ltiplos professores por turma
- ‚úÖ Aluno pode estar em m√∫ltiplas turmas
- ‚úÖ Status tracking (registered/pending)
- ‚úÖ Teacher analytics filtrados por turma
- ‚úÖ **Custom Quizzes**: Professor cria/importa quizzes para a turma
- ‚úÖ **Quiz visibility**: Custom quizzes s√≥ aparecem para alunos da turma
- ‚úÖ **Public quizzes**: 10 m√≥dulos sempre vis√≠veis para todos

---

### **üîê FIREBASE SECURITY RULES:**

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function para verificar se √© teacher
    function isTeacher() {
      return request.auth != null &&
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'Teacher';
    }

    // Helper function para verificar se √© aluno da turma
    function isStudentInClass(classId) {
      return request.auth != null &&
             request.auth.uid in get(/databases/$(database)/documents/classes/$(classId)).data.students.registered;
    }

    // Users collection
    match /users/{userId} {
      allow read: if request.auth.uid == userId || isTeacher();
      allow write: if request.auth.uid == userId;
    }

    // Pre-registered students (whitelist)
    match /pre_registered_students/{email} {
      allow read: if request.auth != null;
      allow create, update, delete: if isTeacher();
    }

    // Classes
    match /classes/{classId} {
      allow read: if request.auth != null &&
                  (isTeacher() || isStudentInClass(classId));
      allow create, update, delete: if isTeacher();
    }

    // Quizzes - PUBLIC vs CUSTOM
    match /quizzes/{quizId} {
      // Quizzes p√∫blicos - todos podem ler
      allow read: if resource.data.isPublic == true;

      // Quizzes customizados - s√≥ alunos da turma
      allow read: if resource.data.isPublic == false &&
                  request.auth != null &&
                  isStudentInClass(resource.data.classId);

      // Criar/editar - s√≥ professores
      allow create, update, delete: if isTeacher();
    }

    // Student Progress
    match /student_progress/{userId} {
      allow read, write: if request.auth.uid == userId;
      allow read: if isTeacher();
    }

    // Quiz Results
    match /quiz_results/{resultId} {
      allow read: if request.auth != null &&
                  (request.auth.uid == resource.data.userId || isTeacher());
      allow create: if request.auth != null &&
                    request.auth.uid == request.resource.data.userId;
    }
  }
}
```

---

### **üìã TAREFAS DE IMPLEMENTA√á√ÉO:**

#### **Phase 1: Class Management System (5-6 horas)**
- [ ] Criar `teacher-classes.html` - P√°gina de gerenciamento de turmas
- [ ] Criar `assets/js/class-management.js` - L√≥gica de turmas
- [ ] Criar `assets/js/csv-import.js` - Parser e valida√ß√£o de CSV
- [ ] Adicionar m√©todos no `firebase-service.js`:
  - [ ] `createClass(classData)`
  - [ ] `addStudentToClass(classId, studentData)`
  - [ ] `importStudentsFromCSV(classId, csvData)`
  - [ ] `checkPreRegistered(email)`
  - [ ] `markAsRegistered(email, userId)`
- [ ] Modificar `auth0-callback.html` - Adicionar whitelist check no signup
- [ ] Atualizar Firebase Security Rules
- [ ] Testar fluxo completo: Create class ‚Üí Add students ‚Üí Signup blocked/allowed

#### **Phase 2: Custom Quizzes (4-5 horas)**
- [ ] Adicionar UI no `teacher-classes.html` para criar quiz manual
- [ ] Criar `assets/js/quiz-creator.js` - Form para criar quest√µes
- [ ] Adicionar m√©todos no `firebase-service.js`:
  - [ ] `createCustomQuiz(quizData)`
  - [ ] `getClassQuizzes(classId)`
  - [ ] `updateCustomQuiz(quizId, quizData)`
  - [ ] `deleteCustomQuiz(quizId)`
- [ ] Modificar `student-dashboard.html`:
  - [ ] Adicionar se√ß√£o "Class Quizzes"
  - [ ] Carregar quizzes customizados da turma
  - [ ] CSS para custom quiz cards
- [ ] Modificar `quiz.js` para suportar custom quizzes
- [ ] Testar: Create custom quiz ‚Üí Student v√™ ‚Üí Student completa ‚Üí Results salvos

#### **Phase 3: Microsoft Forms Import (6-8 horas)**
- [ ] Setup Microsoft Graph API integration
- [ ] Criar `assets/js/forms-import.js`
- [ ] Autentica√ß√£o Microsoft (OAuth)
- [ ] Listar Forms do professor
- [ ] Converter formato Forms ‚Üí Pethology quiz format
- [ ] Preview das quest√µes antes de importar
- [ ] Salvar quiz importado no Firebase
- [ ] Testar: Import form ‚Üí Review ‚Üí Save ‚Üí Student v√™

---

### **Arquivos a Criar:**
- [ ] `teacher-classes.html` - P√°gina de gerenciamento de turmas
- [ ] `assets/js/class-management.js` - L√≥gica de turmas e CSV
- [ ] `assets/js/csv-import.js` - Parser e valida√ß√£o de CSV
- [ ] `assets/js/quiz-creator.js` - UI para criar quizzes manualmente
- [ ] `assets/js/forms-import.js` - Importar de Microsoft Forms

### **Arquivos a Modificar:**
- [ ] `firebase-service.js` - Adicionar m√©todos de classe e custom quizzes
- [ ] `auth0-callback.html` - **CR√çTICO**: Adicionar whitelist check no signup
- [ ] `teacher-dashboard.html` - Link para "My Classes"
- [ ] `student-dashboard.html` - Se√ß√£o "Class Quizzes" + carregar custom quizzes
- [ ] `quiz.js` - Suportar custom quizzes al√©m dos p√∫blicos

### **Valida√ß√µes Importantes:**
1. **CR√çTICO**: Signup bloqueado - verificar email na whitelist antes de criar conta
2. Email √∫nico por turma (n√£o duplicar)
3. Email domain validation (@plc.ie)
4. CSV format validation
5. Limite de alunos por turma (ex: max 100)
6. Permissions: S√≥ teachers podem adicionar alunos

---

### **üéØ RESUMO VISUAL DO FLUXO:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PROFESSOR                                 ‚îÇ
‚îÇ  1. Cria turma "AC25/26"                                    ‚îÇ
‚îÇ  2. Adiciona emails dos alunos (CSV ou manual)              ‚îÇ
‚îÇ  3. Emails salvos na WHITELIST do Firebase                  ‚îÇ
‚îÇ  4. Cria/importa quizzes customizados para a turma          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                         ‚îÇ
        ‚ñº                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ALUNO CONVIDADO‚îÇ         ‚îÇ VISITANTE (sem   ‚îÇ
‚îÇ (email na     ‚îÇ         ‚îÇ  convite)        ‚îÇ
‚îÇ  whitelist)   ‚îÇ         ‚îÇ                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úÖ Signup OK  ‚îÇ         ‚îÇ ‚ùå Signup BLOCKED‚îÇ
‚îÇ ‚úÖ Auto entra ‚îÇ         ‚îÇ ‚úÖ Pode navegar  ‚îÇ
‚îÇ    na turma   ‚îÇ         ‚îÇ ‚úÖ Faz quiz 30%  ‚îÇ
‚îÇ ‚úÖ V√™ m√≥dulos ‚îÇ         ‚îÇ ‚ùå Sem custom    ‚îÇ
‚îÇ    p√∫blicos   ‚îÇ         ‚îÇ    quizzes       ‚îÇ
‚îÇ ‚úÖ V√™ quizzes ‚îÇ         ‚îÇ                  ‚îÇ
‚îÇ    customizados‚îÇ        ‚îÇ                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Resultado:**
- üîí Sistema 100% controlado pelo professor
- üéØ Apenas alunos reais t√™m acesso
- üìö Public modules para marketing/demo
- üîê Custom quizzes exclusivos para turma

---

### **Interface Teacher Classes Page:**
```
My Classes                                    [+ New Class]

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë üìö AC25/26 - Pethology                                ‚ïë
‚ïë Code: AC2526  |  Created: Oct 15, 2025                ‚ïë
‚ïë                                                        ‚ïë
‚ïë Students: 23 registered / 5 pending                   ‚ïë
‚ïë Teachers: Mrs. Smith, Mr. Johnson                     ‚ïë
‚ïë                                                        ‚ïë
‚ïë [+ Add Student]  [üìÑ Import CSV]  [View Details]      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

Student List:
‚úÖ John Doe          john.doe@plc.ie           92% avg
‚úÖ Jane Smith        jane.smith@plc.ie         87% avg
‚è≥ Michael Johnson   michael.j@plc.ie          (Pending signup)
‚è≥ Sarah Wilson      sarah.w@plc.ie            (Pending signup)
```

### **Auto-Assignment Logic:**
```javascript
// No auth0-callback.html ap√≥s signup
async function onAuth0Signup(user) {
  // Check se email est√° pr√©-registrado
  const preReg = await PethologyFirebaseService.checkPreRegistered(user.email);

  if (preReg) {
    // Auto-assign √† turma
    await PethologyFirebaseService.assignToClass(user.id, preReg.classId);
    // Atualizar status
    await PethologyFirebaseService.markAsRegistered(user.email);
    // Mover de pending para registered
    await PethologyFirebaseService.updateClassStudents(preReg.classId, user.id);
  }
}
```

---

- Font dos anouncements pode ser preta
- Nao esquecer de adicionar o content e as tool no menu a esquerda
- Adicionar (mesmo que zerado) os demais modulos, s√≥ pra ver como fica
- Nos achievements temos all, unlocked, locked. adicionar tambem os filtros rare, common e etc assim como no dashboard que ja temos
- Colocar pra ver como fica no demo o Smart Review, Adaptative quiz, Exam mode cards
- Criar uma pasta e colocar os arquivos .md / documenta√ßao juntos
- Nao comitar so demos hehehehehe

- TODO para um futuro distante:
 - Criar testes com cypress
 - Colocar ou nao o repositorio no privado? Porque as chaves tipo do firebase estao todas no meu reposit√≥rio publico do github mas nao sei o quanto isso implica no netlify depois
 - Criar um roadmap bonito pra deixar no site
 - Modelos 3D para estudar anatomia animal